# 🍱 직장인 점심 맛집 파인더 - PRD

## 1. Executive Summary

**아이디어**: 네이버 평점의 인플레이션을 보정하고, 리뷰 텍스트 분석으로 "점심시간에 빠르게 나오는 진짜 맛집"을 찾아주는 서비스.

**대상 사용자**: 서울 직장인 (초기: 강남/여의도/홍대 근무 동료 10명)

**핵심 가치**: 네이버의 "4.3점 vs 4.5점"은 큰 차이가 없지만, 리뷰 텍스트에는 "빠르다/느리다", "혼잡하다/한산하다" 같은 실질적 정보가 있음. 이를 자동으로 추출해 점심 1시간 내에 다녀올 수 있는 맛집을 정확히 추천.

**가설**: 네이버 평점만으로는 변별력이 없지만, (1) 지역별 상대 평점 (2) 리뷰 텍스트의 "빠른 회전율" 키워드 (3) 시간대별 방문자 데이터를 조합하면 실용적인 추천이 가능하다.

**데모 범위**: 강남역 반경 1km 내 한식/양식/중식 음식점 약 200개, 간단한 Streamlit 대시보드

**성공 지표**: 베타 테스터 10명 중 7명이 "다음 주에도 사용 의향 있음"

---

## 2. Problem & Context

### 사용자 페인포인트 Top 3
1. **평점 인플레이션**: 네이버에서 4.0 미만은 거의 없음. 4.2 vs 4.5가 실제로 얼마나 차이 나는지 알 수 없음
2. **점심시간 제약**: 1시간 내에 주문-식사-복귀 해야 하는데, 리뷰에 "음식 느리게 나옴" 같은 정보가 묻혀있음
3. **검색 피로도**: 매번 "강남 한식 맛집" 검색하면 광고/블로그만 나옴. 빠르게 결정하고 싶음

### 현재 대안/경쟁
| 솔루션 | 장점 | 단점 |
|--------|------|------|
| 네이버지도 검색 | 리뷰 많음, 익숙함 | 평점 변별력 없음, 광고 많음 |
| 카카오맵 | 평점 엄격함 | 리뷰 수 적음, 직장 근처 커버리지 낮음 |
| 동료 추천 | 신뢰도 높음 | 매번 물어보기 민망, 확장 안 됨 |
| 구글 검색 | 블로그 후기 풍부 | 광고/바이럴 구분 어려움, 시간 오래 걸림 |

### 본 프로젝트의 차별점
- **지역별 상대 평점**: 강남(평균 4.3)과 구로(평균 4.0)을 다르게 해석
- **리뷰 텍스트 NLP**: "빠른", "회전율", "웨이팅" 같은 키워드 자동 추출
- **시간대 필터**: 네이버 방문자 통계로 "점심 혼잡도" 자동 표시
- **광고 없음**: 순수 데이터 기반, 개인 프로젝트니까 수익화 압박 없음

---

## 3. Objectives & Metrics

### North Star Metric (OEC)
**정의**: 주간 활성 사용자(WAU) 중 실제 방문한 맛집 비율  
**측정식**: `(추천받고 실제 방문한 건수) / (총 검색 세션 수) × 100`  
**목표**: 1주차 20% → 4주차 50%

### Primary Metrics (≤2)
1. **검색당 평균 클릭 수**
   - 정의: 사용자가 리스트에서 몇 개나 클릭해보는가
   - 측정식: `총 클릭 수 / 총 검색 수`
   - 관측주기: 매일
   - 목표: 1주차 2.5 → 4주차 1.8 (빠르게 결정할수록 좋음)

2. **만족도 (방문 후 피드백)**
   - 정의: 실제 다녀온 후 "추천이 정확했나?" 5점 척도
   - 측정식: 피드백 폼 평균 점수
   - 관측주기: 매일
   - 목표: 1주차 3.5 → 4주차 4.2

### Guardrail Metrics (≤2)
1. **에러율**: API 실패 또는 빈 결과 비율 < 5%
2. **로딩 시간**: p95 응답 시간 < 3초

---

## 4. MVP Scope (제약 적합성 명시)

### In-Scope (핵심 기능 2~4개)

**FR-1: 위치 기반 맛집 검색** [M, 3h]
- 사용자 입력: 위치(강남역/여의도역/홍대입구역) + 음식 종류(한식/양식/중식)
- 네이버 Place API로 반경 1km 내 음식점 조회 (최대 100개)
- 지역별 평균 평점 계산 후 상대 평점 표시

**FR-2: 리뷰 텍스트 NLP 분석** [L, 6h]
- 최신 리뷰 10개 수집 (네이버 API)
- "빠른/느린", "웨이팅", "회전율", "조용함/시끄러움" 키워드 추출
- 간단한 감성분석 (긍정/부정/중립 비율)
- "점심 적합도 점수" 계산 (키워드 가중치 기반)

**FR-3: 시간대별 혼잡도 표시** [S, 2h]
- 네이버 방문자 통계 API 활용
- 12시/13시 방문자 수 시각화
- "지금 혼잡함/보통/한산함" 3단계 라벨

**FR-4: 간단한 Streamlit 대시보드** [M, 4h]
- 지도 위 마커로 맛집 표시 (Folium)
- 필터: 상대평점 상위 20% / 점심 적합도 상위 20%
- 클릭 시 상세 정보 (리뷰 요약, 혼잡도, 평점)

### Out-of-Scope (다음 루프로 미룸)
- 실시간 웨이팅 정보 (API 없음)
- 개인화 추천 (사용자 히스토리 기반)
- 모바일 앱 (Flutter → 웹으로 충분)
- 배달 메뉴 정보 (점심 맛집이니까 매장 방문 전제)
- 예약 기능 (네이버 예약 API 연동 복잡함)

### 제약 체크

| 항목 | 예상 | 한도 | 적합성 |
|------|------|------|--------|
| **시간** | 15h (3h+6h+2h+4h) | 주 5h × 4주 = 20h | ✅ (여유 5h) |
| **비용** | ₩0 | 월 ₩100,000 | ✅ |
| - 네이버 API | 무료 (일 25,000회) | | |
| - Railway 배포 | 무료 티어 | | |
| - Streamlit 호스팅 | 무료 | | |

**비고**: 강남역 1km × 3지역 × 100개 × 10리뷰 = 일 3,000회 API 요청 << 25,000회 한도

---

## 5. User Flow & UX Notes

### 핵심 플로우 (7단계)

1. **[진입]** 사용자가 Streamlit 앱 접속
2. **[위치 선택]** 드롭다운에서 "강남역" 선택
3. **[필터링]** "한식" + "점심 적합도 높음" 체크박스
4. **[검색]** "검색" 버튼 클릭 → 로딩 2초
5. **[결과]** 지도에 마커 20개 표시, 리스트도 함께 표시
6. **[상세]** 마커 클릭 → 팝업에 "평점 4.3 (지역 평균 대비 +0.2) / 점심 적합도 85% / 현재 혼잡도 보통"
7. **[피드백]** "다녀왔어요" 버튼 → 간단한 만족도 별점 (선택)

### 상태별 처리
- **빈 상태**: "검색 결과가 없어요. 필터를 조정해보세요"
- **로딩**: 스피너 + "맛집 찾는 중... (최대 3초)"
- **오류**: "네이버 API 오류입니다. 잠시 후 다시 시도해주세요" + 에러 로그 기록

### 초기 와이어프레임 (텍스트)
```
[헤더] 직장인 점심 맛집 파인더
[위치] [강남역 ▼] [음식] [한식 ▼] [검색]
[필터] ☑ 점심 적합도 상위 20%  ☑ 상대평점 상위 20%

[지도 영역 - 60%]
  - Folium 지도, 마커 클릭 가능

[리스트 영역 - 40%]
  1. 홍대감자탕 (4.4★, +0.3 / 점심 적합도 92% / 현재 보통)
  2. 명동칼국수 (4.2★, +0.1 / 점심 적합도 78% / 현재 혼잡)
  ...
```

---

## 6. Requirements

### 6.1 Functional Requirements (FR)

**FR-1: 위치 기반 맛집 검색**
- **사용자 스토리**: 직장인으로서, 내 근처 맛집을 빠르게 찾고 싶다
- **수용기준 1**:
  - Given: 사용자가 "강남역"과 "한식"을 선택하고
  - When: "검색" 버튼을 클릭하면
  - Then: 반경 1km 내 한식당 최대 100개가 3초 이내에 표시된다
- **수용기준 2**:
  - Given: 검색 결과가 있고
  - When: 지역 평균 평점이 4.2일 때
  - Then: 4.4점 음식점은 "+0.2" 라벨과 함께 표시된다

**FR-2: 리뷰 텍스트 NLP 분석**
- **사용자 스토리**: 직장인으로서, 음식이 빨리 나오는지 리뷰를 일일이 읽지 않고 알고 싶다
- **수용기준 1**:
  - Given: 음식점에 리뷰가 10개 이상 있고
  - When: 리뷰 중 "빠르다", "회전율 좋다"가 3번 이상 등장하면
  - Then: "점심 적합도 90%+" 라벨이 표시된다
- **수용기준 2**:
  - Given: 리뷰에 "느리다", "웨이팅 30분"이 2번 이상 등장하면
  - When: 상세 정보를 보면
  - Then: "⚠️ 점심시간 주의: 음식 늦게 나올 수 있음" 경고가 표시된다

**FR-3: 시간대별 혼잡도 표시**
- **사용자 스토리**: 직장인으로서, 지금 가면 얼마나 붐비는지 알고 싶다
- **수용기준 1**:
  - Given: 현재 시간이 12:30이고
  - When: 네이버 방문자 통계에서 12시 방문자가 평균 대비 150%면
  - Then: "🔴 현재 혼잡함" 라벨이 표시된다
- **수용기준 2**:
  - Given: 통계 데이터가 없으면
  - When: 혼잡도를 표시할 때
  - Then: "데이터 없음"으로 표시하고 에러를 기록하지 않는다

**FR-4: Streamlit 대시보드**
- **사용자 스토리**: 직장인으로서, 지도와 리스트를 동시에 보고 싶다
- **수용기준 1**:
  - Given: 검색 결과가 20개 있고
  - When: 지도에서 마커를 클릭하면
  - Then: 팝업에 "평점/점심 적합도/혼잡도"가 표시된다
- **수용기준 2**:
  - Given: 사용자가 맛집을 방문한 후
  - When: "다녀왔어요" 버튼을 클릭하면
  - Then: 간단한 별점 피드백 폼이 나타난다

### 6.2 Non-Functional Requirements (NFR)

- **NFR-1: 응답 시간**: p95 < 3초 (네이버 API 응답 포함)
- **NFR-2: 보안**: API 키는 환경변수로 관리, GitHub에 절대 노출 금지
- **NFR-3: 접근성**: 모바일 브라우저에서도 기본 기능 작동 (반응형 불필요, 최소 가독성만)
- **NFR-4: 오프라인**: API 실패 시 "오프라인입니다" 메시지, 자동 재시도 1회
- **NFR-5: 타임아웃**: 네이버 API 5초 응답 없으면 타임아웃, 사용자에게 "다시 시도" 버튼

---

## 7. Data & Analytics Plan (미니)

### 이벤트 표 (≤5)

| Event | Trigger | Props | user_id | 보존기간 | PII |
|-------|---------|-------|---------|----------|-----|
| search_submitted | 검색 버튼 클릭 | location, cuisine, filter | session_id | 30일 | N |
| restaurant_clicked | 마커/리스트 클릭 | restaurant_id, rank | session_id | 30일 | N |
| feedback_submitted | 피드백 제출 | restaurant_id, rating(1-5) | session_id | 90일 | N |
| error_occurred | API 오류 | error_type, location | session_id | 7일 | N |
| page_loaded | 앱 접속 | timestamp | session_id | 30일 | N |

### 기초 차트 3개
1. **활성 차트**: 일별 검색 수 (목표: 1주차 10 → 4주차 30)
2. **전환 차트**: 검색 → 클릭 → 피드백 퍼널 (목표: 피드백율 20%)
3. **오류 차트**: API 오류율 (목표: < 5%)

### 품질 알림
- 로그 누락: 3시간 동안 이벤트 0건이면 Slack 알림 (개인 프로젝트니까 이메일)
- 에러율 급등: 시간당 에러 10건 이상이면 알림

---

## 8. AI/LLM Design (해당 시)

**유스케이스**: 리뷰 텍스트에서 "점심 적합도" 키워드 추출

**모델**: 
- Phase 1: 단순 키워드 매칭 (정규식)
- Phase 2: KoNLPy + TF-IDF (여유 있으면)

**프롬프트/가드레일**:
- 긍정 키워드: "빠르다", "회전율", "깔끔", "점심 추천"
- 부정 키워드: "느리다", "웨이팅", "오래 걸림", "정신없다"
- 중립 키워드: "맛있다" (맛과 속도는 별개)

**오프라인 평가셋 (샘플 10개)**:
```
리뷰: "음식이 빨리 나와서 점심시간에 좋아요" → 점심 적합도: High
리뷰: "웨이팅 30분, 음식 20분 더 기다림" → 점심 적합도: Low
리뷰: "맛있어요" → 점심 적합도: Unknown (중립)
...
```

**온라인 필터**:
- PII 필터: 전화번호, 이메일 패턴 제거
- 폭언 필터: 욕설 포함 리뷰는 제외 (한국어 비속어 리스트)

**킬스위치**: 
- NLP 모델 오류율 > 30%면 자동 비활성화, 단순 키워드 매칭으로 폴백

---

## 9. Architecture & Ops (Solo)

### 상위 아키텍처 (텍스트 다이어그램)
```
[사용자 브라우저]
     ↓
[Streamlit App] (Railway 무료 티어)
     ↓
[Python Backend]
     ├─ Naver Place API (검색, 리뷰)
     ├─ 간단한 DB (SQLite, 검색 로그)
     └─ NLP 모듈 (KoNLPy or 정규식)
```

### 의존 API/오픈소스
- **네이버 Place API**: 검색, 리뷰, 방문자 통계
- **Streamlit**: 웹 UI
- **Folium**: 지도 시각화
- **Pandas**: 데이터 처리
- **KoNLPy** (선택): 한국어 형태소 분석

### 배포
- **로컬**: `streamlit run app.py`
- **클라우드**: Railway 무료 티어 (GitHub 연동)
- **환경변수**: `NAVER_CLIENT_ID`, `NAVER_CLIENT_SECRET`

### 운영
- **로그**: Streamlit 기본 로그 + 간단한 CSV 파일 (SQLite)
- **알람**: 이메일 (Gmail SMTP, 무료)
- **롤백**: Git revert + Railway 자동 재배포

---

## 10. Release & Next Loop

### 1주 타임박스 계획 (D+0 ~ D+7)

| Day | 작업 | 예상시간 | 완료 기준 |
|-----|------|----------|-----------|
| D+0 | 네이버 API 키 발급, 테스트 | 1h | API 호출 성공, 강남역 100개 조회 |
| D+1 | 검색 기능 구현 (FR-1) | 3h | 위치+음식 종류로 검색 가능 |
| D+2~3 | NLP 모듈 (FR-2) | 6h | 키워드 추출, 점수 계산 완료 |
| D+4 | 혼잡도 (FR-3) + Streamlit UI (FR-4) | 4h | 지도+리스트 표시, 클릭 가능 |
| D+5 | 로깅, 에러 처리 | 1h | 오류 발생 시 알림, 재시도 |
| D+6 | Railway 배포, 테스트 | 0.5h | 동료 1명 접속 테스트 성공 |
| D+7 | 베타 초대 + 피드백 수집 | 0.5h | 10명 초대 완료 |

### 베타(지인/동료) 초대 방법
- **대상**: 회사 동료 10명 (강남/여의도/홍대 근무자)
- **초대**: Slack 메시지 + Railway URL
- **피드백 폼**: Google Forms (5문항)
  1. 추천이 정확했나요? (1-5)
  2. 다음 주에도 쓰고 싶나요? (예/아니오)
  3. 가장 유용한 기능은? (다중선택)
  4. 불편한 점은? (자유 기재)
  5. 추가로 원하는 기능? (자유 기재)

### 다음 루프 후보 (Backlog Top 5 + 이유)
1. **개인화 추천**: 사용자가 자주 가는 음식 종류 학습 → 재방문율 높일 수 있음
2. **실시간 웨이팅**: 네이버 API에 없으면 크롤링 or 사용자 제보 → 정확도 향상
3. **배달 메뉴 통합**: 점심에 나가기 싫은 날 대비 → 사용 시나리오 확장
4. **카카오맵 크롤링**: 평점 변별력 높이기 → 리스크 있지만 품질 향상
5. **Flutter 앱**: 모바일 푸시 알림 → 점심 11시에 "오늘의 추천" 자동 발송

---

## 부가: 적합성 표

### 시간 적합성
| 작업 | 예상 | 실제 여유 |
|------|------|-----------|
| FR-1 검색 | 3h | |
| FR-2 NLP | 6h | |
| FR-3 혼잡도 | 2h | |
| FR-4 UI | 4h | |
| **합계** | **15h** | **20h (여유 5h, 25%)** ✅ |

### 비용 적합성
| 항목 | 월 비용 | 한도 대비 |
|------|---------|-----------|
| 네이버 API | ₩0 | ✅ |
| Railway 호스팅 | ₩0 | ✅ |
| 도메인 (선택) | ₩0 | ✅ |
| **합계** | **₩0** | **₩100,000 (여유 100%)** ✅ |

### 리스크 Top 3 & 완화
1. **리스크**: 네이버 API 무료 티어 초과 (일 25,000회)
   - **완화**: 검색 결과 캐싱 (같은 위치+시간대는 1시간 재사용)
   
2. **리스크**: 리뷰 텍스트 NLP 정확도 낮음
   - **완화**: Phase 1은 단순 키워드, 피드백 받아서 개선

3. **리스크**: 동료들이 안 써줌 (베타 테스터 이탈)
   - **완화**: 1주차에 직접 점심 추천 메시지 보내서 사용 유도

---

## 체크리스트

- [x] 시간/비용 한도 충족 (표 포함)
- [x] FR당 Gherkin ≥2
- [x] 빈/로딩/오류/재시도/타임아웃 정의
- [x] 이벤트 ≤5 & 대시보드 러프
- [x] PII/보안/접근성 최소 항목
- [x] 베타 리크루팅/피드백 경로
- [x] 킬스위치/롤백 경로